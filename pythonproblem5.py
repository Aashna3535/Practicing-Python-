# -*- coding: utf-8 -*-
"""PythonProblem5.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1CO38erSPoU61wg07qws2sxeO1kfhBhyZ

Problem 5: Have word occurances of a text by removing stopwords    
Solution:
"""

#importing nltk library  
import nltk  
# import OS module
import os
  
nltk.download('stopwords') 
  
from nltk.corpus import stopwords 
print(stopwords.words('english'))

# Get the list of all files and directories
path = "/content/sampletxts"
dir_list = os.listdir(path)
  
print("Files and directories in '", path, "' :")
  
# prints all files
print(dir_list)

#Total number of word counts of every file
for x in dir_list:
  file = open(path + '/' + x , "rt")
  data = file.read()
  words = data.split()
  print('Number of total words in ' + x + ':', len(words))

#Function which will remove punctuation and convert the text into lowercase
def remove_punctuation(text):
  punctuations = '''!()-[]{};:'"\,<>./?@#$%^&*_~'''

   # remove punctuation from the text
  no_punct = ""
  for char in text:
     if char not in punctuations:
         no_punct = no_punct + char

  no_punct = no_punct.lower()
  # return the unpunctuated string
  return(no_punct)

from google.colab import files
uploaded = files.upload()

with open('NLTK\'s list of english stopwords', 'r') as readfile:
    stopw = readfile.read()
print(stopw)

temp = ""
filtered_sentence=[]
#Loop through every file in a directory
for x in dir_list:
  text = open(path + '/' + x , "rt")
  d = dict()
  
  # Loop through each line of the file
  for line in text:
    # Remove the leading spaces and newline character
    line = line.strip()
  
    # Calling function
    line = remove_punctuation(line)
  
    # Split the line into words
    words = line.split(" ")
    
    # Iterate over each word in line
    for word in words:
      if word not in stopw:#set(stopwords.words('english')): 
        filtered_sentence.append(word)
      
    for word in filtered_sentence:
      # Check if the word is already in dictionary
      if word in d:
        # Increment count of word by 1
        d[word] = d[word] + 1
      else:
        # Add the word to dictionary with count 1
        d[word] = 1
  
  #adding dictionary keys and values to string 
  for key in list(d.keys()):
    temp = temp + key + "," + str(d[key]) + '\n'

  temp = temp + "\n\n\n\n"  

#writing a new file with a string which is having all file's words and its occurance counts    
with open('/content/Empty.txt', 'w') as writefile:
    writefile.write(temp)

#Reading that new file having words and their occurances of all files without punctuations
with open('/content/Empty.txt', 'r') as readfile:
    print(readfile.read())

